openapi: 3.1.0
x-stoplight:
  id: 7r8ozbmmmsrye
info:
  title: Alfred
  version: '1.0'
  license:
    url: 'https://opensource.org/licenses/MIT'
    name: MIT
  contact:
    email: support@flex.one
    name: Support
    url: 'https://www.flex.one'
  description: Endpoints for Alfred servicing application
  summary: Alfred
servers:
  - url: 'http://localhost:3000'
    description: Local
  - url: 'https://platform.flexbase.dev'
    description: Development
  - url: 'https://platform.flex.one'
    description: Production
paths:
  /alfred/analytics/usage/plaid:
    get:
      summary: List Plaid API Usage
      responses:
        '200':
          $ref: '#/components/responses/PlaidUsageResponse'
      operationId: get-usage-plaid
      description: 'Retrieve a list of Plaid API Usage, organized by Plaid Service'
      parameters:
        - $ref: '#/components/parameters/startDate'
        - $ref: '#/components/parameters/endDate'
        - $ref: '#/components/parameters/dateAggregation'
      tags:
        - Analytics
    parameters: []
  '/alfred/analytics/company/{companyId}/transactions/pending':
    get:
      summary: Get Current Pending Transactions for Company
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    x-stoplight:
                      id: 3pzl5l2h3qw53
                    properties:
                      companyId:
                        type: string
                        x-stoplight:
                          id: xphb0vfjsi9o6
                        format: uuid
                      pendingInvoices:
                        type: number
                        x-stoplight:
                          id: z2xrcichmppe4
                      pendingPayments:
                        type: number
                        x-stoplight:
                          id: z8mfrrb3mjk43
                    required:
                      - companyId
      operationId: get-pending-transactions-by-company
      description: Get Current Pending Transactions for Company
      parameters: []
      tags:
        - Analytics
    parameters:
      - schema:
          type: string
        name: companyId
        in: path
        required: true
        description: flex company id
  /alfred/analytics/companies/transactions/pending:
    get:
      summary: List Current Pending Transactions for Company
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    x-stoplight:
                      id: u8mohbboph4tl
                    items:
                      x-stoplight:
                        id: 7alh9lx1xlttr
                      type: object
                      properties:
                        companyId:
                          type: string
                          x-stoplight:
                            id: 04jagry76f00c
                        pendingInvoices:
                          type: number
                          x-stoplight:
                            id: t1yqfjozgho7n
                        pendingPayments:
                          type: number
                          x-stoplight:
                            id: saupdti43troo
                  metadata:
                    $ref: ./models/PaginationMetadata.yaml
                    x-stoplight:
                      id: kufd7pzv15pu7
      operationId: list-pending-transactions-by-company
      description: List Current Pending Transactions for Company
      parameters: []
      tags:
        - Analytics
    parameters: []
  /alfred/analytics/banking:
    post:
      summary: Banking Metrics
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  metrics:
                    type: array
                    x-stoplight:
                      id: 8u9by6d6w85lr
                    description: array of metric objects the user requests which is defined in the request property metricKeys.
                    items:
                      x-stoplight:
                        id: itu349l36223g
                      type: object
                      properties:
                        product:
                          type: string
                          x-stoplight:
                            id: kzek7mwnsfd0u
                        metricKey:
                          type: string
                          x-stoplight:
                            id: lu8x2m0kp9eod
                        metricType:
                          type: string
                          x-stoplight:
                            id: nots7l0my6kua
                        dateAggregation:
                          type: string
                          x-stoplight:
                            id: e7owpted7smrj
                          description: metric name
                        history:
                          type: array
                          x-stoplight:
                            id: n5heqktb50s71
                          description: array of dates and values associated with the metric.
                          items:
                            x-stoplight:
                              id: 75s2i9svm5m3q
                            type: object
                            properties:
                              date:
                                type: string
                                x-stoplight:
                                  id: 5vvfbma1ygs8w
                                description: date of a specific metric aggregated value
                                example: '2017-01-23'
                              value:
                                type:
                                  - string
                                  - number
                                x-stoplight:
                                  id: 6n53vkdvpgylb
                                description: 'value of the metric '
                              dimensions:
                                type: string
                                x-stoplight:
                                  id: x58p0xz7smsc3
                  metadata:
                    $ref: ./models/PaginationMetadata.yaml
                    x-stoplight:
                      id: i2m62vw1nabtc
              examples:
                Happy Path Approved and Pending Logos Aggregated at a Daily Interval:
                  value:
                    metrics:
                      - name: logos_approved
                        history:
                          - date: '2017-01-23'
                            value: 100
                          - date: '2017-01-22'
                            value: 80
                          - date: '2017-01-21'
                            value: 60
                      - name: logos_pending
                        history:
                          - date: '2017-01-23'
                            value: 76
                          - date: '2017-01-22'
                            value: 66
                          - date: '2017-01-21'
                            value: 52
                    metadata:
                      total: 2
                      page: 0
                      pageSize: 100
                      sort: asc
                      nextToken: some_token
      operationId: get-banking-metrics
      description: retrieves a set of metrics for banking based on user filtering and constraints.
      parameters:
        - $ref: '#/components/parameters/startDate'
        - $ref: '#/components/parameters/endDate'
        - $ref: '#/components/parameters/dateAggregation'
        - schema:
            type: string
            enum:
              - logos
              - revenue
              - wires
              - rewards
              - interest
              - interest_share
              - cards_issued
              - purchases
              - received_ach
              - originated_ach
              - deposits
              - balance
              - account_utilization
              - charge_card_purchases
          in: query
          name: metricKeys
          description: Define which pre-defined metric(s) to return
          required: true
        - schema:
            type: string
            enum:
              - count
              - total
              - sum
              - avg
          in: query
          name: metricTypes
          description: 'Define the metric type to return (count, total, sum, etc...)'
        - schema:
            type: number
            default: 0.0001
          in: query
          name: minimumBalance
          description: minimumBalance
      tags:
        - Analytics
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                tier:
                  x-stoplight:
                    id: 79lpc91cblzjk
                  type: string
                  enum:
                    - '1'
                    - '2'
                    - '3'
                    - '4'
                    - '5'
                status:
                  x-stoplight:
                    id: c6dxvvs8z01id
                  type: string
                  enum:
                    - Approved
                    - Denied
                    - Canceled
                    - Pending
                    - AwaitingDocuments
    parameters: []
  /alfred/analytics/support:
    get:
      summary: Support Metrics
      operationId: get-support-metrics
      responses:
        '200':
          $ref: '#/components/responses/AnalyticsMetric'
      parameters:
        - $ref: '#/components/parameters/startDate'
        - $ref: '#/components/parameters/endDate'
        - $ref: '#/components/parameters/dateAggregation'
        - $ref: '#/components/parameters/metricKey'
      description: Retrieves a set of metrics for support based on user filtering and constraints
      tags:
        - Analytics
    parameters: []
  /alfred/analytics/lithic/settlement/details:
    get:
      summary: List Lithic Settlement Details
      operationId: list-lithic-settlement-details
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  details:
                    type: array
                    items:
                      type: object
                      properties:
                        token:
                          type: string
                        institution:
                          type: string
                        accountToken:
                          type: string
                        eventTokens:
                          type: array
                          items:
                            type: string
                        transactionToken:
                          type: string
                        cardToken:
                          type: string
                        cardProgramToken:
                          type: string
                        currency:
                          type: string
                        network:
                          type: string
                        transactionsGrossAmount:
                          type: integer
                        settledGrossAmount:
                          type: integer
                        disputesGrossAmount:
                          type: integer
                        exceptionGrossAmount:
                          type: integer
                        interchangeGrossAmount:
                          type: integer
                        interchangeFeeExtendedPrecision:
                          type: integer
                        otherFeesGrossAmount:
                          type: integer
                        exceptionReason:
                          type: string
                        created:
                          type: string
                        updated:
                          type: string
                        settlementDate:
                          type: string
                        reportDate:
                          type: string
                        otherFeesDetails:
                          type: string
                          x-stoplight:
                            id: 06w3sijoz8tmi
          description: Array of Lithic Settlement Details
      parameters:
        - $ref: '#/components/parameters/startDate'
        - $ref: '#/components/parameters/endDate'
      description: Wrapper around API to allow us to call multiple target dates in paralle
      tags:
        - Analytics
      x-stoplight:
        id: 2vit01b00gdhj
    parameters: []
  /alfred/analytics/servicing/statements:
    get:
      summary: List Amount Due by Bill Date
      operationId: list-portfolio-statements-by-bill-date
      responses:
        '200':
          $ref: '#/components/responses/ServiceStatements'
      parameters:
        - schema:
            type: string
          in: query
          name: receivedCreditDt
          description: company receivedCreditDt filter
        - schema:
            type: string
          in: query
          name: billDateFrom
          description: minimum bill date to return
        - schema:
            type: string
          in: query
          name: billDateTo
          description: maximum bill date to return
      description: Wrapper around API to allow us to call multiple companies and target dates in parallel
      tags:
        - Analytics
      x-stoplight:
        id: altuepm2t423m
    parameters: []
  /alfred/analytics/usage/crs:
    get:
      summary: List Crs API Usage
      tags:
        - Analytics
      responses:
        '200':
          $ref: '#/components/responses/CrsUsageResponse'
      operationId: get-usage-crs
      description: 'Retrieve a list of CRS API Usage, organized by service'
      parameters:
        - $ref: '#/components/parameters/startDate'
        - $ref: '#/components/parameters/endDate'
        - $ref: '#/components/parameters/dateAggregation'
  /alfred/analytics/usage/persona:
    get:
      summary: List Persona API Usage
      tags:
        - Analytics
      responses:
        '200':
          $ref: '#/components/responses/PersonaUsageResponse'
      operationId: get-usage-persona
      description: 'Retrieve a list of Persona API Usage, organized by service'
      parameters:
        - $ref: '#/components/parameters/startDate'
        - $ref: '#/components/parameters/endDate'
        - $ref: '#/components/parameters/dateAggregation'
  /alfred/analytics/usage/gcp:
    get:
      summary: GCP Usage
      tags:
        - Analytics
      responses:
        '200':
          $ref: '#/components/responses/GcpUsageResponse'
      operationId: get-usage-gcp
      parameters:
        - $ref: '#/components/parameters/startDate'
        - $ref: '#/components/parameters/endDate'
        - $ref: '#/components/parameters/dateAggregation'
      description: 'Retrieve a list of Google Cloud Usage, organized by service and project'
  /alfred/accounts/search:
    post:
      summary: Account search
      operationId: search-accounts
      responses:
        '200':
          $ref: '#/components/responses/AccountSearch'
      tags:
        - Accounts
      description: |-
        Retrieve a list of accounts that match one of the following search criteria:

        * Business Id
        * Business Name
        * Business DBA
        * Business EIN
        * Business Phone
        * Person Id
        * Person Email
        * Person Phone
      requestBody:
        $ref: '#/components/requestBodies/AccountSearch'
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/sortDesc'
        - $ref: '#/components/parameters/nextToken'
        - $ref: '#/components/parameters/pageSize'
        - schema:
            type: string
            default: created
            enum:
              - created
              - creditLimit
          in: query
          name: sortBy
          description: The criteria the results are sorted by
    parameters: []
  /alfred/analytics/onboarding/cards:
    get:
      summary: List Newly Issued Cards
      tags:
        - Analytics
      responses:
        '200':
          $ref: '#/components/responses/CardList'
      operationId: list-new-cards
      parameters:
        - $ref: '#/components/parameters/startDate'
        - $ref: '#/components/parameters/endDate'
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/pageSize'
        - $ref: '#/components/parameters/sort'
      description: Pull Lists of Card Ids
  /alfred/analytics/marketing/emails:
    get:
      summary: List Emails
      tags:
        - Analytics
      responses:
        '200':
          $ref: '#/components/responses/ListMarketingEmailResponse'
      operationId: list-marketing-emails
      description: 'List emails sent through marcomm channels (ActiveCampaign, etc...)'
      parameters:
        - $ref: '#/components/parameters/startDate'
        - $ref: '#/components/parameters/endDate'
        - schema:
            type: string
            enum:
              - bounced
              - clicked
              - delivered
              - opened
              - unsubscribed
          in: query
          name: event
          description: Type of trackable email event
    parameters: []
  /alfred/analytics/credit/originations:
    get:
      summary: Get Credit Origination
      tags:
        - Analytics
      responses:
        '200':
          $ref: '#/components/responses/AnalyticsMetric'
      operationId: get-credit-originations-metrics
      x-stoplight:
        id: vpm5lm4yqb11p
      description: Endpoint to pull summary statistics across originations periods
      parameters:
        - $ref: '#/components/parameters/startDate'
        - $ref: '#/components/parameters/endDate'
        - $ref: '#/components/parameters/dateAggregation'
        - $ref: '#/components/parameters/metricKey'
    parameters: []
  /alfred/analytics/logins:
    get:
      summary: Get Login Metrics
      tags:
        - Analytics
      responses:
        '200':
          $ref: '#/components/responses/AnalyticsMetric'
      operationId: get-login-metrics
      description: Endpoint to pull summary statistics about login data
      parameters:
        - $ref: '#/components/parameters/startDate'
        - $ref: '#/components/parameters/endDate'
        - $ref: '#/components/parameters/dateAggregation'
        - schema:
            type: string
            enum:
              - lastLogin
              - loginRecency
          in: query
          name: metricKey
          description: Define which pre-defined metric(s) to return
          required: true
      x-stoplight:
        id: 1tq0w8tnudhuf
    parameters: []
  '/alfred/analytics/credit/statement/tape/{businessId}':
    parameters:
      - $ref: '#/components/parameters/businessId'
    get:
      summary: GET Credit Loan Tape Record for BusinessId
      tags:
        - Analytics
      responses:
        '200':
          $ref: '#/components/responses/CreditStatementTape'
      operationId: generateCreditStatementLoanTapeRecord
      x-stoplight:
        id: 231peuifqra92
      description: Statement focused credit loan tape by businessId
      parameters:
        - $ref: '#/components/parameters/startDate'
        - $ref: '#/components/parameters/endDate'
  /alfred/analytics/credit/statement/tape:
    get:
      summary: List Credit Loan Tape for Entire Portfolio
      tags:
        - Analytics
      responses:
        '200':
          $ref: '#/components/responses/PortfolioCreditStatementTape'
      operationId: generatePortfolioCreditStatementLoanTape
      x-stoplight:
        id: 123peqtuuwv11
      description: Credit loan tape for the entire portfolio
      parameters:
        - $ref: '#/components/parameters/startDate'
        - $ref: '#/components/parameters/endDate'
  '/alfred/analytics/credit/activity/{companyId}':
    get:
      summary: Get Credit Card Activity
      tags:
        - Analytics
      responses:
        '200':
          $ref: '#/components/responses/CreditCardActivityResponse'
      operationId: get-credit-card-activity
      description: 'Use this endpoint to get data on whether or not a company was ''active'' in a specific time period. For credit, active means did that company make a successful transaction during some period X.'
      parameters:
        - $ref: '#/components/parameters/startDate'
        - $ref: '#/components/parameters/endDate'
        - $ref: '#/components/parameters/dateAggregation'
      x-stoplight:
        id: hvsvy8c7n5asb
    parameters:
      - schema:
          type: string
        name: companyId
        in: path
        required: true
        description: uuid for the company
  /alfred/analytics/credit/activity:
    get:
      summary: List Credit Card Activity
      tags:
        - Analytics
      responses:
        '200':
          $ref: '#/components/responses/CreditCardActivityResponse'
      operationId: list-credit-card-activity
      description: 'Use this endpoint to get data on whether or not all companies was ''active'' in a specific time period. For credit, active means did that company make a successful transaction during some period X.'
      parameters:
        - $ref: '#/components/parameters/startDate'
        - $ref: '#/components/parameters/endDate'
        - $ref: '#/components/parameters/dateAggregation'
      x-stoplight:
        id: vfgb3z9famz65
    parameters: []
  /alfred/analytics/credit/activity/cohorts:
    get:
      summary: List Credit Card Activity
      tags:
        - Analytics
      responses:
        '200':
          $ref: '#/components/responses/CreditCardRetentionCohort'
      operationId: list-credit-card-activity-cohorts
      description: Use this endpoint to get data from /credit/activity aggregated by cohorts. Cohorts are typically defined by origination period (month of quarter).
      parameters:
        - $ref: '#/components/parameters/startDate'
        - $ref: '#/components/parameters/endDate'
        - $ref: '#/components/parameters/dateAggregation'
      x-stoplight:
        id: vcikqunlzudl4
    parameters: []
  /alfred/analytics/credit/rpac:
    get:
      summary: List Credit Card RPAC
      tags:
        - Analytics
      responses:
        '200':
          $ref: '#/components/responses/AnalyticsMetric'
      operationId: list-credit-card-rpac
      description: Use this endpoint to get timeseries data on revenue per active customer (RPAC)
      parameters:
        - $ref: '#/components/parameters/startDate'
        - $ref: '#/components/parameters/endDate'
        - $ref: '#/components/parameters/dateAggregation'
      x-stoplight:
        id: om38hqwt7p5r5
    parameters: []
  /alfred/analytics/credit/transactions/book:
    get:
      summary: List Credit Transaction Book (Monthly)
      tags:
        - Analytics
      responses:
        '200':
          description: Book by company per month
          content:
            application/json:
              schema:
                type: object
                properties:
                  metadata:
                    $ref: ./models/PaginationMetadata.yaml
                    x-stoplight:
                      id: 1yovl531n8zr2
                  data:
                    type: array
                    x-stoplight:
                      id: 131pop6anz64s
                    items:
                      $ref: '#/components/schemas/CreditTransactionsBookAggregate'
                      x-stoplight:
                        id: 5abfj4op312df
      operationId: list-credit-transaction-book
      description: Use this endpoint to get book summary data by company id/name per month
      parameters:
        - $ref: '#/components/parameters/startDate'
        - $ref: '#/components/parameters/endDate'
      x-stoplight:
        id: vhteqgyw3po4n
  /alfred/analytics/credit/transactions/gtv:
    get:
      summary: List Credit Transaction GTV
      tags:
        - Analytics
      responses:
        '200':
          description: GTV by company per requested unit time
          content:
            application/json:
              schema:
                type: object
                properties:
                  metadata:
                    $ref: ./models/PaginationMetadata.yaml
                    x-stoplight:
                      id: 1yovl688n8zr2
                  data:
                    type: array
                    x-stoplight:
                      id: 9m9xhn7anz12s
                    items:
                      $ref: '#/components/schemas/CreditTransactionsAggregate'
                      x-stoplight:
                        id: 4ygdj0rl3mr7u
      operationId: list-credit-transaction-gtv
      description: Use this endpoint to get GTV data by company id/name
      parameters:
        - $ref: '#/components/parameters/startDate'
        - $ref: '#/components/parameters/endDate'
        - $ref: '#/components/parameters/dateAggregation'
      x-stoplight:
        id: gqqeegyw3vdus
  /alfred/analytics/credit/transactions/gtv/rollingAverage:
    get:
      summary: List Rolling Averages for Credit Transactions - GTV
      tags:
        - Analytics
      responses:
        '200':
          description: Portfolio Level Rolling Averages
          content:
            application/json:
              schema:
                type: object
                properties:
                  metadata:
                    $ref: ./models/PaginationMetadata.yaml
                    x-stoplight:
                      id: 1yovl688n8zr2
                  data:
                    type: array
                    x-stoplight:
                      id: 9m9xhn7anz12s
                    items:
                      type: object
                      properties:
                        date:
                          type: string
                          x-stoplight:
                            id: v20od0yxmigbo
                        value:
                          type: number
                          x-stoplight:
                            id: 5nyn20r06cyxm
      operationId: list-credit-transaction-gtv-rolling-average
      description: Use this endpoint to get GTV rolling averages
      parameters:
        - $ref: '#/components/parameters/startDate'
        - $ref: '#/components/parameters/endDate'
        - $ref: '#/components/parameters/dateAggregation'
      x-stoplight:
        id: gqqeegyw3vdus
  /alfred/analytics/credit/transactions/gtv/retention:
    get:
      summary: List Credit Transaction GTV Monthly Retention
      tags:
        - Analytics
      responses:
        '200':
          description: MoM GTV retention by company per month
          content:
            application/json:
              schema:
                type: object
                properties:
                  metadata:
                    $ref: ./models/PaginationMetadata.yaml
                    x-stoplight:
                      id: 1yovl688n8zr2
                  data:
                    type: object
                    additionalProperties:
                      type: array
                      items:
                        type: object
                        properties:
                          monthsSinceFirstTransaction:
                            type: number
                            x-stoplight:
                              id: vec1j21u3ape
                          amount:
                            type: number
                            x-stoplight:
                              id: 2sqdg4bijsf2
      operationId: list-credit-transaction-gtv-retention
      description: Use this endpoint to get MoM GTV retention by company
      parameters:
        - $ref: '#/components/parameters/startDate'
        - $ref: '#/components/parameters/endDate'
      x-stoplight:
        id: 0pv7aju2bjmi
  /alfred/analytics/credit/transactions/interest:
    get:
      summary: List Credit Interest Transaction
      tags:
        - Analytics
      responses:
        '200':
          description: Shared Response
          content:
            application/json:
              schema:
                type: object
                properties:
                  metadata:
                    $ref: ./models/PaginationMetadata.yaml
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/CreditTransactionsAggregate'
      operationId: list-credit-transaction-interest
      description: Use this endpoint to get interest data by company id/name
      parameters:
        - $ref: '#/components/parameters/startDate'
        - $ref: '#/components/parameters/endDate'
        - $ref: '#/components/parameters/dateAggregation'
      x-stoplight:
        id: 64vna8vx9rpjz
  /alfred/analytics/credit/transactions/chargeOffs:
    get:
      summary: List Credit Transaction ChargeOffs
      tags:
        - Analytics
      responses:
        '200':
          description: 'Charge Off data per company, per unit time'
          content:
            application/json:
              schema:
                type: object
                properties:
                  metadata:
                    $ref: ./models/PaginationMetadata.yaml
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/CreditTransactionsAggregate'
      operationId: list-credit-transaction-charge-offs
      description: Use this endpoint to get chargeoffs data by company id/name
      parameters:
        - $ref: '#/components/parameters/startDate'
        - $ref: '#/components/parameters/endDate'
        - $ref: '#/components/parameters/dateAggregation'
      x-stoplight:
        id: mohc29f3np3sz
  /alfred/analytics/credit/transactions/fees:
    get:
      summary: List Credit Transaction Fees
      tags:
        - Analytics
      responses:
        '200':
          description: 'Fees per company, per unit time'
          content:
            application/json:
              schema:
                type: object
                properties:
                  metadata:
                    $ref: ./models/PaginationMetadata.yaml
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/CreditTransactionsAggregate'
      operationId: list-credit-transaction-fees
      description: Use this endpoint to get fees data by company id/name
      parameters:
        - $ref: '#/components/parameters/startDate'
        - $ref: '#/components/parameters/endDate'
        - $ref: '#/components/parameters/dateAggregation'
      x-stoplight:
        id: zxtzy5e8mpbkn
  /alfred/analytics/credit/transactions/repayments:
    get:
      summary: List Credit Transaction Repayments
      tags:
        - Analytics
      responses:
        '200':
          description: 'Repayments by company, per unit time'
          content:
            application/json:
              schema:
                type: object
                properties:
                  metadata:
                    $ref: ./models/PaginationMetadata.yaml
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/CreditTransactionsAggregate'
      operationId: list-credit-transaction-repayments
      description: Use this endpoint to get repayments data by company id/name
      parameters:
        - $ref: '#/components/parameters/startDate'
        - $ref: '#/components/parameters/endDate'
        - $ref: '#/components/parameters/dateAggregation'
      x-stoplight:
        id: hl7pkvtta9j4o
  /alfred/analytics/credit/transactions/repayments/repaymentRate:
    get:
      summary: 'List Repayment Rates by Transaction Age, by Cohort'
      tags:
        - Analytics
      responses:
        '200':
          description: Portfolio Level Repayment Rates by Transaction Age
          content:
            application/json:
              schema:
                type: object
                properties:
                  metadata:
                    $ref: ./models/PaginationMetadata.yaml
                    x-stoplight:
                      id: 43ygm5q2v3d3i
                  data:
                    type: array
                    x-stoplight:
                      id: y5hzjeplj17a6
                    items:
                      type: object
                      properties:
                        origin:
                          type: string
                          x-stoplight:
                            id: 4vahdnk43slqp
                        cohort:
                          type: string
                          x-stoplight:
                            id: ev7fgejnogehs
                        age:
                          type: number
                          x-stoplight:
                            id: n7j0rxy0ptni4
                        originalTransactionAmount:
                          type: number
                          x-stoplight:
                            id: lfi0bnv5wrrf9
                        repaymentAmount:
                          type: number
                          x-stoplight:
                            id: 93lfghsvf6pxf
                        repaymentRate:
                          type: number
                          x-stoplight:
                            id: yf0s4q19tofd7
      operationId: list-repayment-rates-by-transaction-age
      description: Use this endpoint to get repayment rates by transaction age
      parameters:
        - $ref: '#/components/parameters/startDate'
        - $ref: '#/components/parameters/endDate'
        - $ref: '#/components/parameters/origin'
      x-stoplight:
        id: mbzhd9c7izpub
  '/alfred/accounts/{accountId}/applications/{applicationId}/transition':
    parameters:
      - $ref: '#/components/parameters/accountId'
      - $ref: '#/components/parameters/applicationId'
      - $ref: '#/components/parameters/applicationState'
    post:
      summary: Transition application state
      tags:
        - Applications
      responses:
        '200':
          description: OK
      operationId: transitionApplicationState
      x-stoplight:
        id: 7kv3pgt2ifnk5
      description: change Application state
  '/alfred/accounts/{accountId}/applications/{applicationId}/decision':
    parameters:
      - $ref: '#/components/parameters/accountId'
      - $ref: '#/components/parameters/applicationId'
    post:
      summary: Create Application Decision
      tags:
        - Applications
      responses:
        '200':
          description: OK
      operationId: createApplicationDecision
      x-stoplight:
        id: 9nj00l9c15lcr
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                offer:
                  $ref: '#/components/schemas/ApplicationOffer'
                  x-stoplight:
                    id: merzclf1vdg34
                  description: An offer reflecting the the underwriting decision
              required:
                - offer
      description: Accept Application and provide an offer
  /alfred/applications/review:
    get:
      summary: List Applications awaiting a Review
      tags:
        - Applications
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  metadata:
                    $ref: ./models/PaginationMetadata.yaml
                    x-stoplight:
                      id: yo0i9lmm2v12d
                  data:
                    type: array
                    x-stoplight:
                      id: uxt5hemxxmr9v
                    items:
                      $ref: '#/components/schemas/ApplicationForReview'
                      x-stoplight:
                        id: 00kg3iyku3isu
      operationId: listApplicationsForReview
      x-stoplight:
        id: xqw9c9bhn232v
      description: List Applications ready for UW Review
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/pageSize'
        - $ref: '#/components/parameters/nextToken'
        - $ref: '#/components/parameters/sort'
    parameters: []
  '/alfred/accounts/{accountId}/applications/{applicationId}/documents':
    parameters:
      - $ref: '#/components/parameters/accountId'
      - $ref: '#/components/parameters/applicationId'
    post:
      summary: Create Application Requested Document
      tags:
        - Applications
      responses:
        '200':
          description: OK
      operationId: createApplicationRequestedDocument
      x-stoplight:
        id: qmrva4he3w1u1
      description: Requests additional documentation from the applicant
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                note:
                  type: string
                  x-stoplight:
                    id: xscvahmbqoxca
                type:
                  type: string
                  x-stoplight:
                    id: h6vhr6z31h6lm
              required:
                - note
                - type
    get:
      summary: List Application Requested Documents
      tags:
        - Applications
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    x-stoplight:
                      id: xcsqh6tmsf3q1
                    items:
                      x-stoplight:
                        id: ujzmud533eect
                      type: object
                      properties:
                        id:
                          type: string
                          x-stoplight:
                            id: zwvjyb278ecxv
                          format: uuid
                        applicationId:
                          type: string
                          x-stoplight:
                            id: 011k1j6l87bsl
                          format: uuid
                        state:
                          type: string
                          x-stoplight:
                            id: 8e22dr9um79yc
                        type:
                          type: string
                          x-stoplight:
                            id: e88tzuy0cgthf
                        note:
                          type: string
                          x-stoplight:
                            id: 72xtkmqltso12
                        documentUrl:
                          type: string
                          x-stoplight:
                            id: kmpfun9drqmud
                      required:
                        - id
                        - applicationId
                        - state
                        - type
                        - note
                required:
                  - data
      operationId: listApplicationRequestedDocumentForApplication
      x-stoplight:
        id: n3wm9hk87qiac
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/pageSize'
        - $ref: '#/components/parameters/sort'
        - $ref: '#/components/parameters/nextToken'
  '/alfred/accounts/{accountId}/applications/{applicationId}/documents/{documentId}':
    parameters:
      - $ref: '#/components/parameters/accountId'
      - $ref: '#/components/parameters/applicationId'
      - schema:
          type: string
        name: documentId
        in: path
        required: true
        description: The application document identifier
    patch:
      summary: Update Application Requested Document
      tags:
        - Applications
      responses:
        '200':
          description: OK
      operationId: updateApplicationRequestedDocument
      x-stoplight:
        id: f4a1erfuxma7h
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                type:
                  type: string
                  x-stoplight:
                    id: y3l1jbb1vx4hc
                note:
                  type: string
                  x-stoplight:
                    id: v9jijrvw0s64a
              required:
                - type
                - note
    get:
      summary: Get Application Requested Document
      tags:
        - Applications
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    x-stoplight:
                      id: jra4kcpojvyvi
                    format: uuid
                  applicationId:
                    type: string
                    x-stoplight:
                      id: rr317z0st55dn
                    format: uuid
                  state:
                    type: string
                    x-stoplight:
                      id: 12kgi3uw1zjh9
                  type:
                    type: string
                    x-stoplight:
                      id: bbukelqu2n3po
                  note:
                    type: string
                    x-stoplight:
                      id: hzcgtvpxt37cf
                  documentUrl:
                    type: string
                    x-stoplight:
                      id: d029q1juscxb5
                required:
                  - id
                  - applicationId
                  - state
                  - type
                  - note
      operationId: getApplicationRequestedDocument
      x-stoplight:
        id: mz6cdw0kat7ks
  /alfred/applications/documents/review:
    parameters: []
    get:
      summary: List Application Documents for review
      tags:
        - Applications
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    x-stoplight:
                      id: xcsqh6tmsf3q0
                    items:
                      x-stoplight:
                        id: ujzmud533eecs
                      type: object
                      properties:
                        id:
                          type: string
                          x-stoplight:
                            id: zwvjyb278ecxu
                          format: uuid
                        applicationId:
                          type: string
                          x-stoplight:
                            id: 011k1j6l87bsk
                          format: uuid
                        state:
                          type: string
                          x-stoplight:
                            id: 8e22dr9um79yb
                        type:
                          type: string
                          x-stoplight:
                            id: e88tzuy0cgthu
                        note:
                          type: string
                          x-stoplight:
                            id: 72xtkmqltso11
                        documentUrl:
                          type: string
                          x-stoplight:
                            id: kmpfun9drqmul
                      required:
                        - id
                        - applicationId
                        - state
                        - type
                        - note
                        - documentUrl
                required:
                  - data
      operationId: listApplicationDocumentsForReview
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/pageSize'
        - $ref: '#/components/parameters/sort'
      x-stoplight:
        id: l9eki7x67k3h8
  /alfred/companies:
    get:
      summary: List api companies
      tags:
        - Companies
      responses:
        '200':
          $ref: '#/components/responses/CompaniesList'
      operationId: list-api-companies
      description: Retrieve a list of api companies
      parameters:
        - $ref: '#/components/parameters/active'
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/pageSize'
        - $ref: '#/components/parameters/sort'
        - $ref: '#/components/parameters/nextToken'
    post:
      summary: Search companies
      operationId: search-companies
      responses:
        '200':
          $ref: '#/components/responses/CompaniesList'
      tags:
        - Companies
      x-internal: true
      description: Search api companies
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/pageSize'
        - $ref: '#/components/parameters/sort'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                value:
                  type: string
                  x-stoplight:
                    id: ibf9braeeowc9
                  description: The search value
              required:
                - value
  '/alfred/transactions/migrate/credit/{companyId}':
    post:
      summary: Migrate credit transactions to platform
      operationId: post-alfred-companies-transactions-migrate
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  transactionIds:
                    type: array
                    x-stoplight:
                      id: v74fegybdthvc
                    items:
                      x-stoplight:
                        id: tyodj5thn0ryx
                      type: string
      x-stoplight:
        id: er3opq39nfrmg
      description: Migrate credit transactions to platform
      tags:
        - Companies
    parameters:
      - schema:
          type: string
        name: companyId
        in: path
        required: true
  '/alfred/companies/{companyId}/account':
    get:
      summary: Get account id for API company id
      tags:
        - Companies
      description: Use an API company ID (platform business id) to get an account id
      operationId: getAccountIdByCompanyId
      parameters:
        - schema:
            type: string
          name: companyId
          in: path
          required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  accountId:
                    type: string
                    format: uuid
                required:
                  - accountId
  /alfred/analytics/mercoa/invoices:
    get:
      summary: List Mercoa Invoices
      responses:
        '200':
          $ref: '#/components/responses/MercoaInvoiceList'
      operationId: list-mercoa-invoices
      description: List Mercoa Invoices
      parameters:
        - $ref: '#/components/parameters/startDate'
        - $ref: '#/components/parameters/endDate'
        - $ref: '#/components/parameters/mercoaStatus'
        - $ref: '#/components/parameters/mercoaDateField'
      tags:
        - Analytics
  /alfred/analytics/mercoa/invoices/metrics:
    get:
      summary: Summary Statistics from Mercoa Invoices
      responses:
        '200':
          $ref: '#/components/responses/AnalyticsMetric'
      operationId: get-mercoa-invoices-summary-stats
      description: Get summary stats from Mercoa Invoices
      parameters:
        - $ref: '#/components/parameters/startDate'
        - $ref: '#/components/parameters/endDate'
        - $ref: '#/components/parameters/dateAggregation'
        - $ref: '#/components/parameters/mercoaStatus'
        - $ref: '#/components/parameters/mercoaDateField'
      tags:
        - Analytics
  '/alfred/analytics/mercoa/invoices/businesses/{businessId}':
    get:
      summary: List Mercoa Invoices by Business Id (Api Company Id)
      responses:
        '200':
          $ref: '#/components/responses/MercoaInvoiceList'
      operationId: list-mercoa-invoices-by-business
      description: List Mercoa Invoices by Business
      parameters:
        - $ref: '#/components/parameters/startDate'
        - $ref: '#/components/parameters/endDate'
        - $ref: '#/components/parameters/mercoaStatus'
        - $ref: '#/components/parameters/mercoaDateField'
        - schema:
            type: string
          name: businessId
          in: path
          required: true
      tags:
        - Analytics
components:
  schemas:
    ServiceUsage:
      title: Service Usage
      x-stoplight:
        id: k58ajeicj865f
      type: object
      properties:
        service:
          type: string
        date:
          type: string
          format: date
          example: '2023-06-01'
        count:
          type: integer
      x-internal: true
    CreditStatementTape:
      title: Credit Statement Tape
      x-stoplight:
        id: 1z19f9contew3
      type: object
      properties:
        borrowerId:
          type: string
          x-stoplight:
            id: 1t6553gaer4eq
        accountNewFlag:
          type: boolean
          x-stoplight:
            id: 7z07cr9fc6ied
        accountOpenFlag:
          type: boolean
          x-stoplight:
            id: pu83ydds8cb63
        accountOpenMonth:
          type: string
          x-stoplight:
            id: 6pm5nsgb99plz
        activeStatementFlag:
          type: boolean
          x-stoplight:
            id: yg1sn0enpkmir
        activeWithBalanceFlag:
          type: boolean
          x-stoplight:
            id: gexvq87wzg1q0
        anyChargeOffEverFlag:
          type: boolean
          x-stoplight:
            id: c3xjhutdg3t13
        apr:
          type: string
          x-stoplight:
            id: x2qfasgdzp4wk
        avgDailyBalanceAmount:
          type: string
          x-stoplight:
            id: o1jz6na4v7i0e
        bankruptLossAmount:
          type: string
          x-stoplight:
            id: 601435upqskdx
        clientProductCodes:
          type: array
          items:
            type: string
          x-stoplight:
            id: a9y9dx8kys3dl
        companyName:
          type: string
          x-stoplight:
            id: lcottjzlgvvsb
        companyType:
          type: string
          x-stoplight:
            id: 3t1hremma419r
        country:
          type: string
          x-stoplight:
            id: duey964jyx644
        creditLimitAmount:
          type: string
          x-stoplight:
            id: 0l763drhpkbh6
        debitActivityFlag:
          type: boolean
          x-stoplight:
            id: 0h5c3dcgkr057
        delinquentFlag:
          type: boolean
          x-stoplight:
            id: kzq4kp3v7o36z
        endOfPeriodBalanceAmount:
          type: string
          x-stoplight:
            id: 8vamn2uviba2x
        endOfPeriodBalanceNotDelinquentAmount:
          type: string
          x-stoplight:
            id: gj7rvpo3asqet
        feeAmount:
          type: string
          x-stoplight:
            id: sfcyd67wfjxba
        fraudChargeOffAmount:
          type: string
          x-stoplight:
            id: tw3n273613nrf
        incorporationDate:
          type: string
          x-stoplight:
            id: 38pteum33subm
        incorporationState:
          type: string
          x-stoplight:
            id: 7ref8621un38w
        interestFeeAmount:
          type: string
          x-stoplight:
            id: dd3hvx569fzis
        monthOnBookNumber:
          type: number
          x-stoplight:
            id: dd3hvx569fzis
        noPayChargeOffAmount:
          type: string
          x-stoplight:
            id: dd3hvx569fzis
        numberOfActiveCards:
          type: number
          x-stoplight:
            id: dd3hvx569fzis
        originalAccountFlag:
          type: number
          x-stoplight:
            id: dd3hvx569fzis
        overPaymentAmount:
          type: string
          x-stoplight:
            id: 6ydordi9hvc2s
        pastDue10_PlusAmount:
          type: string
          x-stoplight:
            id: ca2wqwny2d4kl
        pastDue121_150Amount:
          type: string
          x-stoplight:
            id: yfe4f4znhinae
        pastDue151_PlusAmount:
          type: string
          x-stoplight:
            id: xbr5kzij25qz6
        pastDue1_30Amount:
          type: string
          x-stoplight:
            id: fp8m00k02449j
        pastDue30_PlusAmount:
          type: string
          x-stoplight:
            id: x2jdw7u6b3ied
        pastDue31_60Amount:
          type: string
          x-stoplight:
            id: mghastdq13qtq
        pastDue61_90Amount:
          type: string
          x-stoplight:
            id: np53elp168qbs
        pastDue91_120Amount:
          type: string
          x-stoplight:
            id: nu084hk7ymajl
        paymentAmount:
          type: string
          x-stoplight:
            id: 1yiia0x4edeeg
        paymentCount:
          type: number
          x-stoplight:
            id: soqikjd4wa11y
        paymentLastDate:
          type: string
          x-stoplight:
            id: ej63pvrcwlz78
        plaidBalanceAmount:
          type: string
          x-stoplight:
            id: jh9f65uuxmb9n
        purchaseAmount:
          type: string
          x-stoplight:
            id: f021q6ip5hgpa
        purchaseCount:
          type: number
          x-stoplight:
            id: d6x4thf5oxu9o
        purchaseLastDate:
          type: string
          x-stoplight:
            id: hp2rsqo2tqmq9
        realizedInterchangeAmount:
          type: string
          x-stoplight:
            id: q2p0diysmm3lv
        rebateAmount:
          type: string
          x-stoplight:
            id: c7ihi6y43g5n3
        refundAmount:
          type: string
          x-stoplight:
            id: 9s235rl97hrdy
        reportingPeriod:
          type: string
          x-stoplight:
            id: 3bns5zsfial9s
        revolvingBalance:
          type: string
          x-stoplight:
            id: pkhaaxd9fom9q
        revolvingFlag:
          type: boolean
          x-stoplight:
            id: bc71i54iitmmi
        selfReportedBusinessVertical:
          type: string
          x-stoplight:
            id: r809prs5skml9
        selfReportedIncome:
          type: string
          x-stoplight:
            id: 0rd5qxg5l6cwl
        state:
          type: string
          x-stoplight:
            id: 8r360qr6qxght
        statementBalance:
          type: string
          x-stoplight:
            id: gexwh8juu8fx2
        website:
          type: string
          x-stoplight:
            id: ln6pfwukfbl7h
        agingStatus:
          type: string
          x-stoplight:
            id: g82soa73b3hqz
        fico:
          type: number
          x-stoplight:
            id: 2c3nve6iewlhr
        firstInvoiceBillDate:
          type: string
          format: date
          x-stoplight:
            id: q0e89zkcc6sbp
        firstPaymentDate:
          type: string
          format: date
          x-stoplight:
            id: 9mc9i71jj7sgh
        loanTapeDate:
          type: string
          format: date
          x-stoplight:
            id: 1hcirxvkdbmkc
        minimumDue:
          type: string
          x-stoplight:
            id: dt3a2ma41qxjg
        nextBillDate:
          type: string
          format: date
          x-stoplight:
            id: r4bxga9udkvj4
        paymentType:
          type: string
          x-stoplight:
            id: bz8v0umg0kf73
        plaidHistoryInMonths:
          type: number
          x-stoplight:
            id: jdsd3m5o8hfkw
        selfReportedBusinessAge:
          type: number
          x-stoplight:
            id: ls1o5ai8depo4
    ServiceCost:
      title: Service Cost
      x-stoplight:
        id: mo6m7bhm90bcq
      type: object
      properties:
        service:
          type: string
        date:
          type: string
          format: date
        cost:
          type: number
    AccountSearchResult:
      title: AccountSearchResult
      x-stoplight:
        id: 3i7rew1llhplk
      type: object
      description: Represents a result from searching for accounts
      required:
        - accountId
        - personId
        - businessName
        - frozen
        - creditLimit
        - minimumDue
        - balance
        - daysPastDue
        - products
        - activated
      properties:
        accountId:
          type: string
        personId:
          type: string
        businessName:
          type: string
        frozen:
          type: boolean
        creditLimit:
          type: number
        minimumDue:
          type: number
        balance:
          type: number
        daysPastDue:
          type: number
        products:
          type: array
          items:
            type: string
        activated:
          type: boolean
          x-stoplight:
            id: ql1gg2yl2afyn
    ListOnboardingUserResult:
      title: ListOnboardingUserResult
      x-stoplight:
        id: au4r83hi7xsxa
      type: object
      properties:
        id:
          type: string
          x-stoplight:
            id: suf5j0iyr6gds
        companyId:
          type: string
          x-stoplight:
            id: yg66754pkmo2z
        createdAt:
          type: string
          x-stoplight:
            id: 06l0v694tz2bb
        completedOnboarding:
          type: string
          x-stoplight:
            id: 6gmd3vg038r4i
        ficoBand:
          type: string
          x-stoplight:
            id: ftfo6y9eryl84
          enum:
            - subprime
            - near_prime
            - prime
            - super_prime
          example: super_prime
        creditLimit:
          type: number
          x-stoplight:
            id: rxah4vp1ffjbw
        hasSsn:
          type: boolean
          x-stoplight:
            id: izph4vp4gajbw
        hasBusinessAddress:
          type: boolean
          x-stoplight:
            id: poen4vp75dw3f
    ListOnboardingUserTimeResult:
      title: ListOnboardingUserTimeResult
      x-stoplight:
        id: v015fzmv1z8eb
      type: object
      properties:
        userId:
          type: string
          x-stoplight:
            id: rp7z90m6zzvfq
        companyId:
          type: string
          x-stoplight:
            id: 9n1fijw46xvj9
        userCreatedAt:
          type: string
          x-stoplight:
            id: kzbi7ze5hobgi
          format: date-time
        companyCreatedAt:
          type: string
          x-stoplight:
            id: 4wupgnxl6j2i3
          format: date-time
        companyFirstIssuedCredit:
          type: string
          x-stoplight:
            id: gczp4gaiw99ly
          format: date-time
        companyFirstOptedCredit:
          type: string
          x-stoplight:
            id: edhv20eda3euy
          format: date-time
      required:
        - userId
    ListOnboardingCardResult:
      title: ListOnboardingCardResult
      x-stoplight:
        id: 8hq2m07gw9p8u
      type: object
      properties:
        id:
          type: string
          x-stoplight:
            id: xzx3fezo8u2jr
        userId:
          type: string
          x-stoplight:
            id: nvgzr1i16kdpw
        companyId:
          type: string
          x-stoplight:
            id: d1vdj69ajb9uc
        currentStatus:
          type: string
          x-stoplight:
            id: kdjts5mfk9c3c
          enum:
            - active
            - issued
            - requested
            - suspended
            - terminated
        cardType:
          type: string
          x-stoplight:
            id: 0ttqyj092k473
          enum:
            - VIRTUAL
            - PHYSICAL
        hasTransactions:
          type: boolean
          x-stoplight:
            id: 2g53remof8xp6
        firstIssuedCardDt:
          type: string
          x-stoplight:
            id: 09cq8mxgev4ha
          format: date-time
        firstActivatedCardDt:
          type: string
          x-stoplight:
            id: 4g7d2k6qv90k9
          format: date-time
    ApplicationCompleted:
      title: ApplicationCompleted
      x-stoplight:
        id: prodc5g1chaqv
      type: object
      properties:
        userId:
          type: string
          x-stoplight:
            id: oma848kozmhuv
        startApplicationDt:
          type: string
          x-stoplight:
            id: dads43uu7j2xp
          format: date-time
        submitApplicationDt:
          type: string
          x-stoplight:
            id: zmhpxg95om3f0
          format: date-time
      required:
        - userId
        - startApplicationDt
        - submitApplicationDt
    ListMarketingEmailResult:
      title: ListMarketingEmailResult
      x-stoplight:
        id: v4xaw90904f27
      type: object
      properties:
        event:
          type: string
          x-stoplight:
            id: vi8qn3zydidzn
        eventTimestamp:
          type: string
          x-stoplight:
            id: rfn9j480hh9mr
        orgName:
          type: string
          x-stoplight:
            id: kojur7v6r9bpc
        email:
          type: string
          x-stoplight:
            id: k7hi3nm8swd6k
        lists:
          type: array
          x-stoplight:
            id: ojaciye88snaq
          items:
            x-stoplight:
              id: tkkiye16sp58g
            type: object
            properties:
              id:
                type: string
                x-stoplight:
                  id: 3vk7x1foqbix8
              name:
                type: string
                x-stoplight:
                  id: chw48lpes0yf1
        campaignId:
          type: string
          x-stoplight:
            id: rxmpf71ovdgkr
    AggregatedCreditCardStatement:
      title: AggregatedCreditCardStatement
      x-stoplight:
        id: 6c868z3dwx4rb
      type: object
      description: fdf
      properties:
        status:
          type: string
          x-stoplight:
            id: 9xu36807vnwny
        dueDate:
          type: string
          x-stoplight:
            id: 8vymw8a2n2d3p
          format: date
        generatedAt:
          type: string
          x-stoplight:
            id: l6lde4ow692hg
          format: date-time
        minimumDue:
          type: number
        interestDue:
          type: number
          x-stoplight:
            id: hw8pjqfbs6lsd
        currentBalance:
          type: number
          x-stoplight:
            id: h0hi6gbxn6jra
        previousBalance:
          type: number
          x-stoplight:
            id: 0fro9jokc15n3
        paymentsPeriodFrom:
          type: string
          x-stoplight:
            id: flmxhgfff7x96
          format: date
        paymentsPeriodTo:
          type: string
          x-stoplight:
            id: 9ldtsmhwem2rq
          format: date
        paymentsSum:
          type: number
          x-stoplight:
            id: 9r57xk3153j78
        invoicesDuePeriodFrom:
          type: string
          x-stoplight:
            id: x2767unr8gm0a
          format: date
        invoicesDuePeriodTo:
          type: string
          x-stoplight:
            id: xnsde5lgfdwp5
          format: date
        invoicesDueSum:
          type: number
          x-stoplight:
            id: shrzfhkkj8hs5
    ListMetricResult:
      title: ListMetricResult
      x-stoplight:
        id: n9abgbijc9sya
      type: object
      description: 'For a given metric, result is a timeseries of that metric with accompanying metadata'
      properties:
        product:
          type: string
          x-stoplight:
            id: u7tbep3o65sd6
        metricKey:
          type: string
          x-stoplight:
            id: cxu72o3fnp41a
        dateAggregation:
          type: string
          x-stoplight:
            id: wuh4961dxuy3n
        history:
          type: array
          x-stoplight:
            id: lt6rv2uzv1kjb
          items:
            $ref: '#/components/schemas/MetricHistory'
            x-stoplight:
              id: 3dcm1ij5h2lxu
    MetricHistory:
      title: MetricHistory
      x-stoplight:
        id: 7l1fbrjo1asvq
      type: object
      properties:
        date:
          type: string
          x-stoplight:
            id: hdvfgfzulyrij
          format: date
        total:
          type: number
          x-stoplight:
            id: qip1to6wxfk3o
        count:
          type: number
          x-stoplight:
            id: 9dfr064rdnoam
        sum:
          type: number
          x-stoplight:
            id: 6odufzqa794vq
        avg:
          type: number
          x-stoplight:
            id: zly8bt32yy1cn
        median:
          type: number
          x-stoplight:
            id: 90urfdrz0u32a
        min:
          type: number
          x-stoplight:
            id: orxs0a6zwg4ps
        max:
          type: number
          x-stoplight:
            id: b3xvdja5xic13
        dimensions:
          type: string
          x-stoplight:
            id: rgej047n2z13x
      description: A single element of the timeseries in a Metric Result
    CreditCardActivity:
      title: CreditCardActivity
      x-stoplight:
        id: mx1kpl50tu6m0
      type: object
      properties:
        companyId:
          type: string
          x-stoplight:
            id: pb0d3htyt6dnh
          format: uuid
        dt:
          type: string
          x-stoplight:
            id: 2zxa331x8paan
          format: date
        active:
          type: boolean
          x-stoplight:
            id: c7mpgp5dqp1hy
    RetentionCohort:
      title: RetentionCohort
      x-stoplight:
        id: gb0ahentkc5bk
      type: object
      properties:
        cohortDt:
          type: string
          x-stoplight:
            id: 6jm7e2kr7p706
          format: date
        cohortSize:
          type: number
          x-stoplight:
            id: 3nhxmlx0ai53e
        data:
          type: array
          x-stoplight:
            id: qd7br6f4k2olr
          items:
            x-stoplight:
              id: 22md9vg31i6o5
            type: object
            properties:
              dt:
                type: string
                x-stoplight:
                  id: 8nsf2dl8rzehn
                format: date
              totalSpend:
                type: number
                x-stoplight:
                  id: mxeld4r8db8dj
              totalActive:
                type: number
                x-stoplight:
                  id: hiigardsbfvb8
    ApplicationOffer:
      title: ApplicationOffer
      x-stoplight:
        id: rirwycsg0hnq2
      type: object
      properties:
        details:
          type: object
          x-stoplight:
            id: 9rep5nb13x3gr
          description: '//TODO: details yet to be defined'
        expirationAt:
          type: string
          x-stoplight:
            id: v86cy4jalvrby
          format: date
          description: The date which an offer becomes expired
      required:
        - details
    ApplicationForReview:
      title: ApplicationForReview
      x-stoplight:
        id: 4wyl0asgsfgri
      type: object
      properties:
        id:
          x-stoplight:
            id: ccp7rsx6c76f1
          type: string
          format: uuid
          description: The Application identifier
        createdAt:
          type: string
          x-stoplight:
            id: owuc0h9b8rtmq
          format: date
        product:
          type: string
          x-stoplight:
            id: ptrybs2sejxxz
        reviewerId:
          type: string
          x-stoplight:
            id: sya23jyiz2hth
          format: uuid
        status:
          type: string
          x-stoplight:
            id: pp6x5flxqedr5
        submittedAt:
          type: string
          x-stoplight:
            id: 92utgwutvw4il
          format: date
        submittedBy:
          type: string
          x-stoplight:
            id: 0insol65axuvj
          format: uuid
      required:
        - id
        - createdAt
        - product
        - status
        - submittedAt
        - submittedBy
      description: Application information needed for UW review
    CreditTransactionsAggregate:
      title: CreditTransactionsAggregate
      x-stoplight:
        id: ud3jvp02v9rcp
      type: object
      properties:
        companyId:
          type: string
          format: uuid
        cohort:
          type: string
          format: date
        date:
          type: string
          format: date
        isNewCustomer:
          type: boolean
        amount:
          type: number
          x-stoplight:
            id: jy194jynapr3h
    CreditTransactionsBookAggregate:
      title: CreditTransactionsBookAggregate
      x-stoplight:
        id: td5pol54r4prc
      allOf:
        - $ref: '#/components/schemas/CreditTransactionsAggregate'
        - type: object
          properties:
            totalDelinquentAmount:
              type: number
            delinquentAmount0To30:
              type: number
            delinquentAmount31To60:
              type: number
            delinquentAmount61To90:
              type: number
            delinquentAmount91To120:
              type: number
            delinquentAmount121To150:
              type: number
            delinquentAmount151To180:
              type: number
            delinquentAmount181Plus:
              type: number
            amountDueInGoodStanding:
              type: number
            creditedAmount:
              type: number
  responses:
    MercoaInvoiceList:
      description: Represents a list of mercoa invoices
      content:
        application/json:
          schema:
            type: object
            properties:
              metadata:
                $ref: ./models/PaginationMetadata.yaml
                description: Pagination metadata
              data:
                description: Mercoa Invoices results
                type: array
                items:
                  $ref: ./models/MercoaInvoice.yaml
                  x-stoplight:
                    id: 6v9g0jn8vf691
            required:
              - metadata
              - data
    PlaidUsageResponse:
      description: Service Usage Response for the Plaid API
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                type: array
                items:
                  $ref: '#/components/schemas/ServiceUsage'
              metadata:
                $ref: ./models/PaginationMetadata.yaml
            required:
              - data
              - metadata
    CrsUsageResponse:
      description: Service Usage Response for the Crs API
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                type: array
                items:
                  $ref: '#/components/schemas/ServiceUsage'
              metadata:
                $ref: ./models/PaginationMetadata.yaml
    PersonaUsageResponse:
      description: Example response
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                type: array
                items:
                  $ref: '#/components/schemas/ServiceUsage'
              metadata:
                $ref: ./models/PaginationMetadata.yaml
    GcpUsageResponse:
      description: Example response
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                type: array
                items:
                  $ref: '#/components/schemas/ServiceCost'
              metadata:
                $ref: ./models/PaginationMetadata.yaml
    AccountSearch:
      description: Represents account search results
      content:
        application/json:
          schema:
            type: object
            properties:
              metadata:
                $ref: ./models/PaginationMetadata.yaml
                description: Pagination metadata
              data:
                type: array
                description: An array of results
                items:
                  $ref: '#/components/schemas/AccountSearchResult'
            required:
              - metadata
              - data
    UserList:
      description: Array of User Ids
      content:
        application/json:
          schema:
            type: object
            properties:
              metadata:
                $ref: ./models/PaginationMetadata.yaml
                x-stoplight:
                  id: pbyu0x0cjmz8i
              data:
                type: array
                x-stoplight:
                  id: uszkcv7kd41vb
                items:
                  $ref: '#/components/schemas/ListOnboardingUserResult'
                  x-stoplight:
                    id: pa7q88616c62e
    UserListOnboardingTime:
      description: ''
      content:
        application/json:
          schema:
            type: object
            properties:
              metadata:
                $ref: ./models/PaginationMetadata.yaml
                x-stoplight:
                  id: 9awj8o4n3tolj
              data:
                type: array
                x-stoplight:
                  id: j8t1l401zavwr
                items:
                  $ref: '#/components/schemas/ListOnboardingUserTimeResult'
                  x-stoplight:
                    id: h43jwehxa8oky
                  id: eq9qcb6qtj4pf
    CardList:
      description: Array of Card Ids with basic info
      content:
        application/json:
          schema:
            type: object
            properties:
              metadata:
                $ref: ./models/PaginationMetadata.yaml
                x-stoplight:
                  id: m13adduiw9t2u
              data:
                type: array
                x-stoplight:
                  id: 18c46i7mch1iw
                items:
                  $ref: '#/components/schemas/ListOnboardingCardResult'
                  x-stoplight:
                    id: f6ku6dujtqihx
    ApplicationCompletedList:
      description: Example response
      content:
        application/json:
          schema:
            type: object
            properties:
              metadata:
                $ref: ./models/PaginationMetadata.yaml
                x-stoplight:
                  id: mxi1g77ay4m4b
              data:
                x-stoplight:
                  id: 3cjmp6ietuzho
                type: array
                items:
                  $ref: '#/components/schemas/ApplicationCompleted'
                  x-stoplight:
                    id: lwb36d2c3yi70
    ListMarketingEmailResponse:
      description: List of email events from marcomms
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                type: array
                x-stoplight:
                  id: 7kmun1vxtwc0a
                items:
                  $ref: '#/components/schemas/ListMarketingEmailResult'
                  x-stoplight:
                    id: phe19fg407slg
              metadata:
                $ref: ./models/PaginationMetadata.yaml
                x-stoplight:
                  id: 8avr9q2vnxc4o
    AnalyticsMetric:
      description: Metrics data with pagination metadata
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                $ref: '#/components/schemas/ListMetricResult'
                x-stoplight:
                  id: gf0fl5z7f5f5l
              metadata:
                $ref: ./models/PaginationMetadata.yaml
                x-stoplight:
                  id: wxazdz6y5xhtn
    PortfolioCreditStatementTape:
      description: Portfolio Credit Statement Loan Tape Response
      content:
        application/json:
          schema:
            type: object
            properties:
              metadata:
                $ref: ./models/PaginationMetadata.yaml
                x-stoplight:
                  id: f3org92kf03k1
              data:
                type: array
                items:
                  $ref: '#/components/schemas/CreditStatementTape'
    CreditStatementTape:
      description: Credit Statement Loan Tape Response
      content:
        application/json:
          schema:
            type: object
            properties:
              metadata:
                $ref: ./models/PaginationMetadata.yaml
                x-stoplight:
                  id: ddod44aqw2nn3
              data:
                $ref: '#/components/schemas/CreditStatementTape'
                x-stoplight:
                  id: r695z77t7a01m
    ServiceStatements:
      description: Example response
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
              data:
                type: array
                items:
                  $ref: '#/components/schemas/AggregatedCreditCardStatement'
                  x-stoplight:
                    id: 5utt8fjrqa3f5
    CreditCardActivityResponse:
      description: 'Array of Credit Card Activity by Date, Company'
      content:
        application/json:
          schema:
            type: object
            properties:
              startDate:
                type: string
                x-stoplight:
                  id: r9r2egd3qcbyy
              endDate:
                type: string
                x-stoplight:
                  id: dt9g8ncr8a03r
              dateAggregation:
                type: string
                x-stoplight:
                  id: xx82q13l4vtg8
              data:
                type: array
                x-stoplight:
                  id: iafg3iggfdzwq
                items:
                  $ref: '#/components/schemas/CreditCardActivity'
                  x-stoplight:
                    id: x421sksvbdh8w
    CreditCardRetentionCohort:
      description: ''
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/RetentionCohort'
    CompaniesList:
      description: Example response
      content:
        application/json:
          schema:
            type: object
            properties:
              metadata:
                $ref: ./models/PaginationMetadata.yaml
                x-stoplight:
                  id: ozpfpsxbpwg8b
              data:
                type: array
                x-stoplight:
                  id: g0j97a5bzsa7n
                items:
                  x-stoplight:
                    id: wvxkim56fij4g
                  type: object
                  properties:
                    id:
                      type: string
                      x-stoplight:
                        id: gett09bbie38s
                      description: The company identifier
                    accountId:
                      type: string
                      x-stoplight:
                        id: gp31j7c8ol2c7
                      description: The account identifier
                    name:
                      type: string
                      x-stoplight:
                        id: azfybbi9edrrc
                      description: The name of the company
                    active:
                      type: boolean
                      x-stoplight:
                        id: 5t2gnru8pny8k
                      description: A value indicating if the company is active
                  required:
                    - id
                    - name
                    - active
            required:
              - metadata
              - data
  parameters:
    applicationState:
      name: applicationState
      in: query
      required: true
      schema:
        type: string
        enum:
          - incomplete
          - submitted
          - review
          - pending
          - denied
          - offer
          - withdrawn
          - accepted
          - declined
          - expired
    businessId:
      name: businessId
      in: path
      required: true
      schema:
        type: string
        format: uuid
      description: The business identifier
    startDate:
      name: startDate
      in: query
      required: false
      schema:
        type: string
        format: date
      description: Minimum date to include in response
    endDate:
      name: endDate
      in: query
      required: false
      schema:
        type: string
        format: date
      description: Maximum date to include in response
    dateAggregation:
      name: dateAggregation
      in: query
      required: false
      schema:
        type: string
        enum:
          - year
          - quarter
          - month
          - week
          - day
          - hour
          - minute
          - second
        example: year
      description: 'Unit of aggregation data across dates (daily, weekly, etc...)'
    mercoaStatus:
      name: mercoaStatus
      in: query
      required: false
      schema:
        type: string
        enum:
          - DRAFT
          - FAILED
          - APPROVED
          - SCHEDULED
          - PAID
          - PENDING
          - CANCELED
          - NEW
      description: Mercoa Statuses to filter on
    mercoaDateField:
      name: mercoaDateField
      in: query
      required: false
      schema:
        type: string
        enum:
          - createdAt
          - asOf
          - invoiceDate
          - deductionDate
          - settlementDate
          - dueDate
      description: Mercoa date field to filter on
    origin:
      name: origin
      in: query
      required: false
      schema:
        type: string
        enum:
          - interest
          - manual
          - badPayment
          - rebate
          - adjustment
          - autopay
          - funding-fee
          - fraud-charge-off
          - nopay-charge-off
      description: Api origin type from card_payments table
    page:
      name: page
      in: query
      schema:
        type: integer
        minimum: 0
        default: 0
      description: Which page of results to request
    pageSize:
      name: pageSize
      in: query
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 25
        exclusiveMinimum: 0
      description: The number of resources returned per page
    sort:
      name: sort
      in: query
      schema:
        type: string
        enum:
          - asc
          - desc
        default: asc
      description: The sort order of results
    sortDesc:
      name: sort
      in: query
      schema:
        type: string
        enum:
          - asc
          - desc
        default: desc
      description: The sort order of results
    nextToken:
      name: nextToken
      in: query
      schema:
        type: string
      description: A token to retrieve the next set of results
    metricKey:
      name: metricKey
      in: query
      required: true
      schema:
        type: string
      description: Define which pre-defined metric to return; for analytics/metrics endpoints
    accountId:
      name: accountId
      in: path
      required: true
      schema:
        type: string
        format: uuid
      description: The account identifier
    applicationId:
      name: applicationId
      in: path
      required: true
      schema:
        type: string
        format: uuid
      description: The application identifier
    active:
      name: active
      in: query
      required: false
      schema:
        type: boolean
      description: Filters based on active status
  requestBodies:
    AccountSearch:
      content:
        application/json:
          schema:
            type: object
            properties:
              value:
                type: string
                maxLength: 100
                description: The value to search for
  securitySchemes:
    token:
      type: http
      scheme: bearer
      description: Bearer token
security:
  - token: []
tags:
  - name: Accounts
    description: Accounts
  - name: Analytics
    description: Analytics
  - name: Applications
    description: Applications
  - name: Companies
    description: Companies
x-internal: true
